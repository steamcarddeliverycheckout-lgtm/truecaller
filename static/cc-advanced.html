<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>H4K3R CC Checker</title>
  <style>
    :root {
      --bg-1: #141e30;
      --bg-2: #243b55;
      --glass: rgba(255, 255, 255, 0.08);
      --glass-border: rgba(255, 255, 255, 0.16);
      --text-strong: #0f172a;
      --text-muted: #5f6b7a;
      --brand-blue: #2563eb;
      --brand-purple: #7c3aed;
      --brand-orange: #f59e0b;
      --brand-red: #ef4444;
      --success: #22c55e;
      --error: #ef4444;
      --radius-xl: 26px;
      --radius-lg: 18px;
      --radius-md: 14px;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 32px 16px;
      font-family: "Inter", "Segoe UI", -apple-system, BlinkMacSystemFont, sans-serif;
      background: radial-gradient(circle at top left, rgba(126, 58, 237, 0.55), transparent 35%),
                  radial-gradient(circle at bottom right, rgba(37, 99, 235, 0.5), transparent 30%),
                  linear-gradient(135deg, var(--bg-1), var(--bg-2));
      color: var(--text-strong);
    }

    .surface {
      width: 100%;
      max-width: 880px;
      background: rgba(255, 255, 255, 0.92);
      border-radius: var(--radius-xl);
      padding: 36px 28px;
      backdrop-filter: blur(14px);
      box-shadow: 0 25px 70px rgba(15, 23, 42, 0.35);
      animation: fadeIn 0.6s ease;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .page-header {
      text-align: center;
      margin-bottom: 32px;
    }

    .page-title {
      font-size: clamp(26px, 5vw, 34px);
      font-weight: 800;
      letter-spacing: -0.02em;
      color: var(--text-strong);
      margin-bottom: 6px;
    }

    .page-subtitle {
      font-size: 16px;
      color: var(--text-muted);
      font-weight: 500;
    }

    .card {
      background: rgba(255, 255, 255, 0.72);
      border-radius: var(--radius-lg);
      padding: 24px 24px 28px;
      border: 1px solid rgba(15, 23, 42, 0.08);
      box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.9),
                  0 14px 35px rgba(15, 23, 42, 0.12);
    }

    .mode-toggle {
      display: flex;
      gap: 8px;
      background: rgba(37, 99, 235, 0.08);
      padding: 6px;
      border-radius: 999px;
      margin-bottom: 20px;
    }

    .mode-button {
      flex: 1;
      border: none;
      border-radius: 999px;
      padding: 12px 14px;
      font-size: 15px;
      font-weight: 600;
      color: var(--text-muted);
      background: transparent;
      cursor: pointer;
      transition: all 0.25s ease;
    }

    .mode-button:hover {
      color: var(--brand-purple);
    }

    .mode-button.active {
      background: linear-gradient(135deg, rgba(124, 58, 237, 0.92), rgba(37, 99, 235, 0.92));
      box-shadow: 0 8px 18px rgba(37, 99, 235, 0.28);
      color: #ffffff;
    }

    .card-heading {
      display: flex;
      flex-direction: column;
      gap: 6px;
      margin-bottom: 24px;
    }

    .checker-label {
      font-size: 13px;
      font-weight: 600;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      color: var(--text-muted);
    }

    .checker-title {
      font-size: clamp(20px, 4vw, 26px);
      font-weight: 800;
      letter-spacing: -0.01em;
      display: flex;
      align-items: center;
      gap: 10px;
      color: var(--text-strong);
    }

    .tier-tag {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 12px;
      border-radius: 999px;
      font-size: 12px;
      font-weight: 700;
      letter-spacing: 0.1em;
      text-transform: uppercase;
    }

    .tag-standard {
      background: rgba(59, 130, 246, 0.12);
      color: #2563eb;
      border: 1px solid rgba(59, 130, 246, 0.35);
    }

    .tag-premium {
      background: rgba(239, 68, 68, 0.12);
      color: #ef4444;
      border: 1px solid rgba(239, 68, 68, 0.35);
    }

    .checker-description {
      font-size: 15px;
      color: var(--text-muted);
      font-weight: 500;
    }

    .field {
      margin-bottom: 18px;
    }

    .field label {
      display: block;
      font-size: 14px;
      font-weight: 600;
      color: var(--text-strong);
      margin-bottom: 10px;
    }

    .card-input {
      width: 100%;
      padding: 16px 18px;
      border-radius: var(--radius-md);
      border: 2px solid rgba(15, 23, 42, 0.08);
      background: rgba(248, 250, 252, 0.85);
      font-size: 16px;
      font-family: "JetBrains Mono", "SFMono-Regular", Menlo, Consolas, monospace;
      font-weight: 600;
      letter-spacing: 0.04em;
      color: var(--text-strong);
      transition: all 0.2s ease;
    }

    .card-input::placeholder {
      color: rgba(15, 23, 42, 0.35);
      font-weight: 500;
    }

    .card-input:focus {
      outline: none;
      border-color: rgba(124, 58, 237, 0.75);
      background: #ffffff;
      box-shadow: 0 0 0 5px rgba(124, 58, 237, 0.15);
    }

    .input-hint {
      margin-top: 6px;
      font-size: 13px;
      color: var(--text-muted);
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .chips {
      display: grid;
      gap: 10px;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
    }

    .chip {
      border: 1px solid rgba(15, 23, 42, 0.12);
      background: rgba(248, 250, 252, 0.95);
      border-radius: 14px;
      padding: 10px 14px;
      font-size: 14px;
      font-weight: 600;
      color: var(--text-muted);
      cursor: pointer;
      transition: all 0.2s ease;
      text-align: center;
    }

    .chip:hover {
      border-color: rgba(124, 58, 237, 0.4);
      color: var(--brand-purple);
    }

    .chip.active {
      background: linear-gradient(130deg, rgba(124, 58, 237, 0.95), rgba(37, 99, 235, 0.95));
      color: #ffffff;
      border-color: transparent;
      box-shadow: 0 10px 22px rgba(37, 99, 235, 0.25);
      transform: translateY(-1px);
    }

    .chip.small {
      font-size: 13px;
      padding: 10px;
    }

    .cta-button {
      width: 100%;
      border: none;
      border-radius: 18px;
      padding: 16px 20px;
      font-size: 17px;
      font-weight: 700;
      color: #ffffff;
      cursor: pointer;
      transition: all 0.25s ease;
      margin-top: 10px;
    }

    .btn-standard {
      background: linear-gradient(135deg, #2563eb, #7c3aed);
      box-shadow: 0 15px 30px rgba(37, 99, 235, 0.35);
    }

    .btn-standard:hover {
      box-shadow: 0 18px 36px rgba(37, 99, 235, 0.45);
      transform: translateY(-1px);
    }

    .btn-premium {
      background: linear-gradient(135deg, #f59e0b, #ef4444);
      box-shadow: 0 15px 28px rgba(239, 68, 68, 0.35);
    }

    .btn-premium:hover {
      box-shadow: 0 18px 36px rgba(239, 68, 68, 0.45);
      transform: translateY(-1px);
    }

    .cta-button:disabled {
      opacity: 0.65;
      transform: none;
      cursor: not-allowed;
      box-shadow: none;
    }

    .panel {
      margin-top: 26px;
      padding: 18px 20px 20px;
      border-radius: 18px;
      background: rgba(248, 250, 252, 0.95);
      border: 2px solid rgba(148, 163, 184, 0.25);
      box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.75);
      display: none;
    }

    .panel.show {
      display: block;
      animation: slideUp 0.35s ease;
    }

    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .panel.loading {
      border-left: 4px solid var(--brand-blue);
      background: rgba(219, 234, 254, 0.6);
    }

    .panel.success {
      border-left: 4px solid var(--success);
      background: rgba(220, 252, 231, 0.6);
    }

    .panel.error {
      border-left: 4px solid var(--error);
      background: rgba(254, 226, 226, 0.6);
    }

    .panel-head {
      font-size: 16px;
      font-weight: 700;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .panel-body {
      margin: 0;
      background: #ffffff;
      border-radius: 12px;
      padding: 14px;
      font-size: 14px;
      line-height: 1.6;
      white-space: pre-wrap;
      word-break: break-word;
      font-family: "JetBrains Mono", "SFMono-Regular", Menlo, Consolas, monospace;
      color: var(--text-strong);
      max-height: 360px;
      overflow-y: auto;
    }

    .panel-status {
      margin-top: 12px;
      font-size: 13px;
      font-weight: 600;
      color: var(--text-muted);
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .panel-status span {
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .panel-body::-webkit-scrollbar {
      width: 8px;
    }

    .panel-body::-webkit-scrollbar-track {
      background: rgba(241, 245, 249, 0.8);
      border-radius: 999px;
    }

    .panel-body::-webkit-scrollbar-thumb {
      background: rgba(100, 116, 139, 0.45);
      border-radius: 999px;
    }

    @media (max-width: 640px) {
      .surface {
        padding: 28px 18px;
      }

      .card {
        padding: 22px 18px 26px;
      }

      .chips {
        grid-template-columns: repeat(auto-fit, minmax(130px, 1fr));
      }

      .panel-body {
        font-size: 13px;
      }
    }
  </style>
</head>
<body>
  <div class="surface">
    <div class="page-header">
      <div class="page-title">💳 H4K3R Card Analyzer</div>
      <div class="page-subtitle">Instant Telegram gate checks with a silky soft UI</div>
    </div>

    <div class="card">
      <div class="mode-toggle" role="tablist" aria-label="Select checker">
        <button class="mode-button active" data-checker="first" aria-pressed="true">H4K3R Checker</button>
        <button class="mode-button" data-checker="second" aria-pressed="false">H4K3R CHECKER PRO</button>
      </div>

      <div class="card-heading">
        <div class="checker-label">Selected checker</div>
        <div class="checker-title" id="checkerTitle">🔐 H4K3R Checker</div>
        <div class="tier-tag tag-standard" id="tierTag">Standard</div>
        <div class="checker-description" id="checkerDescription">Auth & Charge gates via Telegram bot</div>
      </div>

      <div class="field">
        <label for="cardInput">Card details</label>
        <input id="cardInput" class="card-input" type="text" placeholder="5333499418581618|03|2029|232" autocomplete="off">
        <div class="input-hint">Format: number|month|year|cvv</div>
      </div>

      <div class="field">
        <label>Category</label>
        <div class="chips" id="categoryChips"></div>
      </div>

      <div class="field">
        <label>Provider</label>
        <div class="chips" id="providerChips"></div>
      </div>

      <button id="actionButton" class="cta-button btn-standard">⚡ Run H4K3R Checker</button>

      <div id="resultPanel" class="panel">
        <div class="panel-head" id="resultHeader"></div>
        <pre class="panel-body" id="resultBody"></pre>
        <div class="panel-status" id="resultStatus"></div>
      </div>
    </div>
  </div>

  <script>
    const CARD_REGEX = /^\d{13,19}\|\d{2}\|\d{2,4}\|\d{3,4}$/;

    const CONFIG = {
      first: {
        title: '🔐 H4K3R Checker',
        tierLabel: 'Standard',
        tierClass: 'tag-standard',
        description: 'Auth & Charge gates via Telegram bot',
        buttonText: '⚡ Run H4K3R Checker',
        buttonClass: 'btn-standard',
        categories: {
          auth: {
            label: 'Auth Gate',
            providers: {
              stripe: 'Stripe /st',
              braintree: 'Braintree /ba'
            }
          },
          charge: {
            label: 'Charge Gate',
            providers: {
              paypal: 'PayPal /pp',
              shopify: 'Shopify /sp'
            }
          }
        }
      },
      second: {
        title: '🔥 H4K3R CHECKER PRO',
        tierLabel: 'Premium',
        tierClass: 'tag-premium',
        description: 'Premium auth & charge with advanced routes',
        buttonText: '🚀 Run Checker Pro',
        buttonClass: 'btn-premium',
        categories: {
          auth: {
            label: 'Auth Gate',
            providers: {
              braintree: 'Braintree /br',
              stripe: 'Stripe /chk'
            }
          },
          charge: {
            label: 'Charge Gate',
            providers: {
              braintree: 'Braintree /ch',
              stripe: 'Stripe /sk'
            }
          }
        }
      }
    };

    const state = {
      checker: 'first',
      category: null,
      provider: null
    };

    const checkerTitleEl = document.getElementById('checkerTitle');
    const tierTagEl = document.getElementById('tierTag');
    const checkerDescriptionEl = document.getElementById('checkerDescription');
    const categoryChipsEl = document.getElementById('categoryChips');
    const providerChipsEl = document.getElementById('providerChips');
    const actionButton = document.getElementById('actionButton');
    const cardInput = document.getElementById('cardInput');

    const resultPanel = document.getElementById('resultPanel');
    const resultHeader = document.getElementById('resultHeader');
    const resultBody = document.getElementById('resultBody');
    const resultStatus = document.getElementById('resultStatus');

    let statusTimer = null;
    let statusStart = 0;

    function clearStatusTimer() {
      if (statusTimer) {
        clearInterval(statusTimer);
        statusTimer = null;
      }
    }

    function startStatusTimer() {
      clearStatusTimer();
      statusStart = Date.now();
      const phases = [
        { at: 0, text: '📡 Connecting to Telegram bots' },
        { at: 6, text: '⌛ Waiting for bot response' },
        { at: 12, text: '🤖 Bots can take up to 20 seconds to reply' },
        { at: 20, text: '⏱ Still waiting, please hold on…' }
      ];

      const update = () => {
        const elapsed = Math.floor((Date.now() - statusStart) / 1000);
        let phaseText = phases[phases.length - 1].text;
        for (let i = phases.length - 1; i >= 0; i--) {
          if (elapsed >= phases[i].at) {
            phaseText = phases[i].text;
            break;
          }
        }
        resultStatus.textContent = `${phaseText} • ${elapsed}s elapsed`;
      };

      update();
      statusTimer = setInterval(update, 1000);
    }

    function stopStatusTimer(finalText) {
      clearStatusTimer();
      if (finalText) {
        resultStatus.textContent = finalText;
      }
    }

    function setPanelState(type, header, body, status) {
      resultPanel.className = 'panel show' + (type ? ' ' + type : '');
      resultHeader.textContent = header || '';
      resultBody.textContent = body || '';
      resultStatus.textContent = status || '';
    }

    function renderChips() {
      const cfg = CONFIG[state.checker];
      const categoryKeys = Object.keys(cfg.categories);
      if (!categoryKeys.includes(state.category)) {
        state.category = categoryKeys[0];
      }

      categoryChipsEl.innerHTML = '';
      categoryKeys.forEach((catKey) => {
        const btn = document.createElement('button');
        btn.type = 'button';
        btn.className = 'chip' + (state.category === catKey ? ' active' : '');
        btn.textContent = cfg.categories[catKey].label;
        btn.addEventListener('click', () => {
          state.category = catKey;
          renderChips();
        });
        categoryChipsEl.appendChild(btn);
      });

      const providerMap = cfg.categories[state.category].providers;
      const providerKeys = Object.keys(providerMap);
      if (!providerKeys.includes(state.provider)) {
        state.provider = providerKeys[0];
      }

      providerChipsEl.innerHTML = '';
      providerKeys.forEach((provKey) => {
        const btn = document.createElement('button');
        btn.type = 'button';
        btn.className = 'chip small' + (state.provider === provKey ? ' active' : '');
        btn.textContent = providerMap[provKey];
        btn.addEventListener('click', () => {
          state.provider = provKey;
          renderChips();
        });
        providerChipsEl.appendChild(btn);
      });
    }

    function updateCardVisuals() {
      const cfg = CONFIG[state.checker];
      checkerTitleEl.textContent = cfg.title;
      checkerDescriptionEl.textContent = cfg.description;
      tierTagEl.textContent = cfg.tierLabel;
      tierTagEl.className = `tier-tag ${cfg.tierClass}`;
      actionButton.textContent = cfg.buttonText;
      actionButton.className = `cta-button ${cfg.buttonClass}`;
    }

    function setActiveChecker(newChecker) {
      if (!CONFIG[newChecker]) return;
      state.checker = newChecker;
      state.category = null;
      state.provider = null;
      updateCardVisuals();
      renderChips();

      document.querySelectorAll('.mode-button').forEach((btn) => {
        const isActive = btn.dataset.checker === newChecker;
        btn.classList.toggle('active', isActive);
        btn.setAttribute('aria-pressed', isActive ? 'true' : 'false');
      });

      setPanelState('', '', '', '');
      resultPanel.className = 'panel';
    }

    async function runCheck() {
      const cardValue = cardInput.value.trim();
      if (!cardValue) {
        setPanelState('error', '❌ Missing card', 'Please enter card details before checking.', '');
        return;
      }

      if (!CARD_REGEX.test(cardValue)) {
        setPanelState('error', '❌ Invalid format', 'Use format: number|month|year|cvv\nExample: 5333499418581618|03|2029|232', '');
        return;
      }

      const checker = state.checker;
      const category = state.category;
      const provider = state.provider;

      if (!category || !provider) {
        setPanelState('error', '❌ Missing selection', 'Pick a category and provider to continue.', '');
        return;
      }

      setPanelState('loading', 'Processing…', 'Sending card to Telegram validator…\nWaiting for gateway reply…', '');
      startStatusTimer();
      actionButton.disabled = true;

      try {
        const response = await fetch('/cc-check-advanced', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            card: cardValue,
            checker: checker,
            gate_category: category,
            gate_provider: provider
          })
        });

        const data = await response.json();

        if (data.ok && data.raw) {
          setPanelState('success', '✅ Response received', data.raw, '');
          const elapsed = Math.floor((Date.now() - statusStart) / 1000);
          stopStatusTimer(`Finished in ${elapsed}s • Telegram messages: ${data.messages || 1}`);
        } else {
          const errorMsg = data.detail || JSON.stringify(data);
          setPanelState('error', '❌ Bot error', errorMsg, '');
          const elapsed = Math.floor((Date.now() - statusStart) / 1000);
          stopStatusTimer(`Completed in ${elapsed}s with an error`);
        }
      } catch (err) {
        setPanelState('error', '❌ Network error', `Failed to reach the server.\n${err.message}`, '');
        const elapsed = Math.floor((Date.now() - statusStart) / 1000);
        stopStatusTimer(`Stopped after ${elapsed}s due to network issues`);
      } finally {
        actionButton.disabled = false;
      }
    }

    document.querySelectorAll('.mode-button').forEach((btn) => {
      btn.addEventListener('click', () => setActiveChecker(btn.dataset.checker));
    });

    actionButton.addEventListener('click', runCheck);

    cardInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        e.preventDefault();
        runCheck();
      }
    });

    setActiveChecker('first');
  </script>
</body>
</html>
